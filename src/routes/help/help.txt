# API Documentation

## API V0

The tttc-turbo is still very new, and in alpha stage. As such its API simply gives you access to the raw graph data. This data format is however stable, and unlikely to change often in the future.

### Auth

Copy your browser's 'token' cookie value. You'll need to add it to your headers. This is a firebase token, as such it expires after 1 hour of signing in. If you would want a token with a longer life, please get in touch, and we'll build this functionality for you.

### Python example

<br/>

```python
import requests

url = "https://tttc-turbo.web.app/api/dataset?slug=hm-test"
token = "..."
headers = {"Authorization": f"Bearer {token}"}
response = requests.get(url, headers=headers)
if response.status_code == 200:
    data = response.json()
    print(data)
else:
    print(f"Failed to retrieve data: {response.status_code}")
```

<br/>
<br/>
<br/>

-------------------------------------------

<br/>
<br/>
<br/>

#### Getting clusters

Datasets are stored as a graph. Here's an example of searching for a cluster extraction node in your dataset.

<br/>


```python
import requests
from rich import print


def get_dataset(url, token):
    headers = {"Authorization": f"Bearer {token}"}
    response = requests.get(url, headers=headers)
    if response.status_code == 200:
        data = response.json()
    else:
        print(f"Failed to retrieve data: {response.status_code}")
    return data


def get_cluster_extraction(dataset):
    nodes = dataset["graph"]["nodes"]
    clusters = next(
        iter([n for n in nodes if "cluster_extraction" in n["data"]["compute_type"]])
    )
    return clusters["data"]["output"]


url = "https://tttc-turbo.web.app/api/dataset?slug=hm-test"
token = "..."

dataset = get_dataset(url, token)
clusters = get_cluster_extraction(dataset)

print(clusters)
```